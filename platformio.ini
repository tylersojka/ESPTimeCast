[env:lolin_s2_mini]
platform = espressif32
board = lolin_s2_mini
framework = arduino
monitor_speed = 115200
upload_speed = 115200

; Partition scheme to match Arduino IDE's "Default 4MB with spiffs"
board_build.filesystem = littlefs
board_build.partitions = huge_app.csv

; Library dependencies
lib_deps = 
    bblanchon/ArduinoJson @ ^6.21.0
    majicdesigns/MD_Parola @ ^3.7.1
    majicdesigns/MD_MAX72XX @ ^3.5.1
    ESP32Async/AsyncTCP
    ESP32Async/ESPAsyncWebServer

; ESP32-S2 specific flags
build_flags = 
    -D ARDUINO_USB_CDC_ON_BOOT=1
    -D CORE_DEBUG_LEVEL=0
    ; -D ARDUINO_USB_MODE=1
    ; -D USE_TINYUSB=1

; Upload settings for S2 Mini
upload_protocol = esptool
upload_flags = 
    --before=default_reset
    --after=hard_reset

; Monitor filters
monitor_filters = 
    esp32_exception_decoder
    default